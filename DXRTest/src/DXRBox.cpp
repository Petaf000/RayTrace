// DXRBox.cpp
#include "DXRBox.h"


void DXRBox::Init() {
    CreateBoxGeometry();
}

void DXRBox::UnInit() {
    m_vertices.clear();
    m_indices.clear();
}

void DXRBox::CreateBoxGeometry() {
    m_vertices.clear();
    m_indices.clear();

    float w = m_size.x * 0.5f;
    float h = m_size.y * 0.5f;
    float d = m_size.z * 0.5f;

    // 24頂点（各面4頂点）
    m_vertices = {
        // 前面 (Z+)
        {{-w, -h,  d}, {0, 0, 1}, {0, 1}},
        {{ w, -h,  d}, {0, 0, 1}, {1, 1}},
        {{ w,  h,  d}, {0, 0, 1}, {1, 0}},
        {{-w,  h,  d}, {0, 0, 1}, {0, 0}},

        // 背面 (Z-)
        {{ w, -h, -d}, {0, 0, -1}, {0, 1}},
        {{-w, -h, -d}, {0, 0, -1}, {1, 1}},
        {{-w,  h, -d}, {0, 0, -1}, {1, 0}},
        {{ w,  h, -d}, {0, 0, -1}, {0, 0}},

        // 右面 (X+)
        {{ w, -h,  d}, {1, 0, 0}, {0, 1}},
        {{ w, -h, -d}, {1, 0, 0}, {1, 1}},
        {{ w,  h, -d}, {1, 0, 0}, {1, 0}},
        {{ w,  h,  d}, {1, 0, 0}, {0, 0}},

        // 左面 (X-)
        {{-w, -h, -d}, {-1, 0, 0}, {0, 1}},
        {{-w, -h,  d}, {-1, 0, 0}, {1, 1}},
        {{-w,  h,  d}, {-1, 0, 0}, {1, 0}},
        {{-w,  h, -d}, {-1, 0, 0}, {0, 0}},

        // 上面 (Y+)
        {{-w,  h,  d}, {0, 1, 0}, {0, 1}},
        {{ w,  h,  d}, {0, 1, 0}, {1, 1}},
        {{ w,  h, -d}, {0, 1, 0}, {1, 0}},
        {{-w,  h, -d}, {0, 1, 0}, {0, 0}},

        // 下面 (Y-)
        {{-w, -h, -d}, {0, -1, 0}, {0, 1}},
        {{ w, -h, -d}, {0, -1, 0}, {1, 1}},
        {{ w, -h,  d}, {0, -1, 0}, {1, 0}},
        {{-w, -h,  d}, {0, -1, 0}, {0, 0}}
    };

    // インデックス（各面2三角形）
    m_indices = {
        // 前面
        0, 1, 2,    2, 3, 0,
        // 背面  
        4, 5, 6,    6, 7, 4,
        // 右面
        8, 9, 10,   10, 11, 8,
        // 左面
        12, 13, 14, 14, 15, 12,
        // 上面
        16, 17, 18, 18, 19, 16,
        // 下面
        20, 21, 22, 22, 23, 20
    };
}